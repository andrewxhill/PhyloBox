<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>PhyloBox</title>
    <meta name="description" content="PhyloBox Editor">
    <script type="text/javascript">
        var key = '{{ key }}';
    </script>
    
    <script type="text/javascript" src="/static/javascript/jquery.js"></script>  
    
    <script type="text/javascript" src="/static/javascript/jqtouch/jqtouch.js"></script>  
    <script type="text/javascript" src="/static/javascript/jqtouch/jqtouch.transitions.js"></script>  
    
    <script type="text/javascript" src="/static/javascript/jquery-ui/jquery.ui.core.js"></script>
    <script type="text/javascript" src="/static/javascript/jquery-ui/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="/static/javascript/jquery-ui/jquery.ui.mouse.js"></script>
    <script type="text/javascript" src="/static/javascript/jquery-ui/jquery.ui.slider.js"></script>
    <script type="text/javascript" src="/static/javascript/jquery-ui/jquery.ui.button.js"></script>
    <script type="text/javascript" src="/static/javascript/jquery-ui/jquery.gritter.min.js"></script>
    <link rel="stylesheet" href="/static/javascript/jquery-themes/base/jquery.ui.all.css"/>
    <link rel="stylesheet" href="/static/javascript/jquery-themes/jquery.gritter.css"/>
    <link rel="stylesheet" href="/static/css/slider.css"/>

    <script type="text/javascript" src="/static/javascript/engine/rendering-v.0.6.js"></script>  
    <script type="text/javascript" src="/static/javascript/engine/PhyloBoxTools.js"></script>  
    <script type="text/javascript" src="/static/javascript/jscolor/jscolor.js"></script>
	<script type="text/javascript" src="/static/javascript/livesearch/quicksilver.js"></script> 
	<script type="text/javascript" src="/static/javascript/livesearch/jquery.livesearch.js"></script> 
	
    
    <link rel="stylesheet" href="/static/css/treeEditor.css" /> 
    <link rel="stylesheet" href="/static/css/optionsPanel.css" /> 
    <link rel="stylesheet" href="/static/css/toolMenu.css" /> 
    <link rel="stylesheet" href="/static/css/header.css" /> 
    
    <script type="text/javascript" src="/static/javascript/engine/PhyloBoxViewer.js"></script> 
    
    
<script type="text/javascript">
var jQ = $.jQTouch();

$(document).ready(function(){
    
    $("#tree-canvas").attr('width',$(window).width());
    $("#tree-canvas").attr('height',0.94*$(window).height());
    $("#tree-canvas").css({'padding':'0px','margin':'0px','float':'left'});
	$(".trigger").click(function(){
        var id = this.id;
		$("#"+id+"Panel").toggle("fast");
		$(this).toggleClass("active");
        $('.subpanel').hide();
		return false;
	});
    
    $('.trigger').mousedown(function(e){
            var d = $(this);
            var child = $("#"+this.id+"Panel");
            var dx = d.offset().left;
            var dy = d.offset().top;
            var xgap = e.pageX-dx;
            var ygap = e.pageY-dy;
                                if (!$.browser.msie) {
                                    e.preventDefault();
                                }
        $(document).mousemove(function(e){
            var x = e.pageX-xgap;
            var y = e.pageY-ygap;
                              if ($.browser.msie) {
                                // IE only here
                                e.preventDefault();  //IE's
                                if(e.pageX >= 0 && e.pageY >= 0){
                                     d.css({left: x, top: y });
                                     child.css({left: x, top: y })
                                }
                                return false;
                              }
                                // FF only here
                if(e.pageX >= 0 && e.pageY >= 0){
                    d.css({left: x, top: y });
                    child.css({left: x, top: y });
                }
                             return true;
        });
    }).mouseup(function(e){ $(document).unbind('mousedown');$(document).unbind('mousemove');});

});
</script>
</head>
<body id="PhyloBoxBody">
<div id="wrapper">
    <canvas id="tree-canvas" height="450" width="435"></canvas>
</div>
<div id="toolsPanel" class="panel">
    {{ toolMenu }}
    <div style="clear:both;"></div>
</div>
<div id="taxaPanel" class="panel">
        <div id="taxalist">
        
            <form method="get" autocomplete="off"> 
                <div> 
                    <input type="text" value="" name="nodeq" id="nodeq" /> 
                </div> 
            </form> 
            <ul id="treenodes" class="nodes"> 
            </ul>
        </div>
    <div style="clear:both;"></div>
</div>
<div id="nodePanel" class="panel">
    here are your node options
</div>
<div id="optionsPanel" class="panel">
    {{ optionsPanel }}
    <div style="clear:both;"></div>
</div>
<a id="taxa" class="trigger" href="#">taxa</a>
<a id="tools" class="trigger" href="#">tools</a>
<a id="options" class="trigger" href="#">options</a>
<div id="saving" class="ajax_dialog">
    <img src="/static/images/icons/ajax.gif"/><span>Saving...</span>
</div>
<div id="loading" class="ajax_dialog">
    <img src="/static/images/icons/ajax.gif"/><span>Loading...</span>
</div>
<div id="user">
{% if user %}
    {{user}} | <a href="/projects">projects</a> | 
{% endif %}  
    <a href="/">new</a> | 
    <a href="{{ url }}">{{ url_linktext }}</a>
</div>
</body>
</html>
